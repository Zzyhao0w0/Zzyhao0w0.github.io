window.searchIndex = {"fields":["title","body"],"pipeline":["trimmer","stopWordFilter","stemmer"],"ref":"id","version":"0.9.5","index":{"body":{"root":{"docs":{},"df":0,"1":{"docs":{"https://zzyhao0w0.github.io/optimistic-lock/":{"tf":1.7320508075688772}},"df":1},"c":{"docs":{},"df":0,"a":{"docs":{"https://zzyhao0w0.github.io/optimistic-lock/":{"tf":1.0}},"df":1}},"d":{"docs":{},"df":0,"a":{"docs":{},"df":0,"o":{"docs":{"https://zzyhao0w0.github.io/optimistic-lock/":{"tf":1.4142135623730951}},"df":1}},"e":{"docs":{},"df":0,"v":{"docs":{},"df":0,"e":{"docs":{},"df":0,"l":{"docs":{},"df":0,"o":{"docs":{},"df":0,"p":{"docs":{"https://zzyhao0w0.github.io/web-project/":{"tf":1.0}},"df":1}}}}}}},"e":{"docs":{},"df":0,"r":{"docs":{},"df":0,"r":{"docs":{"https://zzyhao0w0.github.io/web-project/":{"tf":1.4142135623730951}},"df":1}}},"g":{"docs":{},"df":0,"o":{"docs":{},"df":0,"l":{"docs":{},"df":0,"a":{"docs":{},"df":0,"n":{"docs":{},"df":0,"g":{"docs":{"https://zzyhao0w0.github.io/web-project/":{"tf":1.0}},"df":1}}}}}},"i":{"docs":{},"df":0,"d":{"docs":{"https://zzyhao0w0.github.io/optimistic-lock/":{"tf":1.4142135623730951}},"df":1}},"l":{"docs":{},"df":0,"o":{"docs":{},"df":0,"c":{"docs":{},"df":0,"k":{"docs":{"https://zzyhao0w0.github.io/optimistic-lock/":{"tf":1.0}},"df":1}}}},"n":{"docs":{},"df":0,"i":{"docs":{},"df":0,"l":{"docs":{"https://zzyhao0w0.github.io/web-project/":{"tf":1.0}},"df":1}}},"o":{"docs":{},"df":0,"p":{"docs":{},"df":0,"t":{"docs":{},"df":0,"i":{"docs":{},"df":0,"m":{"docs":{},"df":0,"i":{"docs":{},"df":0,"s":{"docs":{},"df":0,"t":{"docs":{"https://zzyhao0w0.github.io/optimistic-lock/":{"tf":1.0}},"df":1}}}}}}}},"p":{"docs":{},"df":0,"a":{"docs":{},"df":0,"g":{"docs":{},"df":0,"e":{"docs":{"https://zzyhao0w0.github.io/test-page/":{"tf":1.0}},"df":1}}},"r":{"docs":{},"df":0,"i":{"docs":{},"df":0,"c":{"docs":{},"df":0,"e":{"docs":{"https://zzyhao0w0.github.io/optimistic-lock/":{"tf":2.0}},"df":1}}}}},"r":{"docs":{},"df":0,"e":{"docs":{},"df":0,"t":{"docs":{},"df":0,"u":{"docs":{},"df":0,"r":{"docs":{},"df":0,"n":{"docs":{"https://zzyhao0w0.github.io/web-project/":{"tf":1.0}},"df":1}}}}},"u":{"docs":{},"df":0,"s":{"docs":{},"df":0,"t":{"docs":{},"df":0,"，":{"docs":{},"df":0,"因":{"docs":{},"df":0,"为":{"docs":{},"df":0,"我":{"docs":{},"df":0,"发":{"docs":{},"df":0,"现":{"docs":{},"df":0,"好":{"docs":{},"df":0,"像":{"docs":{},"df":0,"g":{"docs":{},"df":0,"o":{"docs":{},"df":0,"l":{"docs":{},"df":0,"a":{"docs":{},"df":0,"n":{"docs":{},"df":0,"g":{"docs":{},"df":0,"确":{"docs":{},"df":0,"实":{"docs":{},"df":0,"是":{"docs":{},"df":0,"太":{"docs":{},"df":0,"简":{"docs":{},"df":0,"单":{"docs":{},"df":0,"了":{"docs":{},"df":0,"，":{"docs":{},"df":0,"当":{"docs":{},"df":0,"然":{"docs":{},"df":0,"，":{"docs":{},"df":0,"指":{"docs":{},"df":0,"的":{"docs":{},"df":0,"是":{"docs":{},"df":0,"语":{"docs":{},"df":0,"法":{"docs":{},"df":0,"简":{"docs":{},"df":0,"单":{"docs":{},"df":0,"，":{"docs":{},"df":0,"很":{"docs":{},"df":0,"多":{"docs":{},"df":0,"设":{"docs":{},"df":0,"计":{"docs":{},"df":0,"思":{"docs":{},"df":0,"想":{"docs":{},"df":0,"在":{"docs":{},"df":0,"这":{"docs":{},"df":0,"门":{"docs":{},"df":0,"语":{"docs":{},"df":0,"言":{"docs":{},"df":0,"都":{"docs":{},"df":0,"无":{"docs":{},"df":0,"法":{"docs":{},"df":0,"体":{"docs":{},"df":0,"现":{"docs":{},"df":0,"出":{"docs":{},"df":0,"来":{"docs":{},"df":0,"，":{"docs":{},"df":0,"就":{"docs":{},"df":0,"会":{"docs":{},"df":0,"写":{"docs":{},"df":0,"很":{"docs":{},"df":0,"多":{"docs":{},"df":0,"的":{"docs":{},"df":0,"重":{"docs":{},"df":0,"复":{"docs":{},"df":0,"代":{"docs":{},"df":0,"码":{"docs":{},"df":0,"（":{"docs":{},"df":0,"没":{"docs":{},"df":0,"错":{"docs":{},"df":0,"，":{"docs":{},"df":0,"说":{"docs":{},"df":0,"的":{"docs":{},"df":0,"就":{"docs":{},"df":0,"是":{"docs":{},"df":0,"i":{"docs":{},"df":0,"f":{"docs":{"https://zzyhao0w0.github.io/web-project/":{"tf":1.0}},"df":1}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"s":{"docs":{},"df":0,"c":{"docs":{},"df":0,"r":{"docs":{},"df":0,"a":{"docs":{},"df":0,"t":{"docs":{},"df":0,"c":{"docs":{},"df":0,"h":{"docs":{"https://zzyhao0w0.github.io/web-project/":{"tf":1.0}},"df":1}}}}}},"e":{"docs":{},"df":0,"t":{"docs":{"https://zzyhao0w0.github.io/optimistic-lock/":{"tf":1.4142135623730951}},"df":1}},"o":{"docs":{},"df":0,"f":{"docs":{},"df":0,"t":{"docs":{},"df":0,"w":{"docs":{},"df":0,"a":{"docs":{},"df":0,"r":{"docs":{"https://zzyhao0w0.github.io/web-project/":{"tf":1.0}},"df":1}}}}}}},"t":{"docs":{},"df":0,"a":{"docs":{},"df":0,"b":{"docs":{},"df":0,"l":{"docs":{"https://zzyhao0w0.github.io/optimistic-lock/":{"tf":1.4142135623730951}},"df":1}}},"e":{"docs":{},"df":0,"s":{"docs":{},"df":0,"t":{"docs":{"https://zzyhao0w0.github.io/test-page/":{"tf":1.4142135623730951}},"df":1}}},"i":{"docs":{},"df":0,"m":{"docs":{},"df":0,"e":{"docs":{},"df":0,"s":{"docs":{},"df":0,"t":{"docs":{},"df":0,"a":{"docs":{},"df":0,"m":{"docs":{},"df":0,"p":{"docs":{"https://zzyhao0w0.github.io/optimistic-lock/":{"tf":1.0}},"df":1}}}}}}}}},"u":{"docs":{},"df":0,"n":{"docs":{},"df":0,"i":{"docs":{},"df":0,"x":{"docs":{},"df":0,"_":{"docs":{},"df":0,"t":{"docs":{},"df":0,"i":{"docs":{},"df":0,"m":{"docs":{},"df":0,"e":{"docs":{},"df":0,"s":{"docs":{},"df":0,"t":{"docs":{},"df":0,"a":{"docs":{},"df":0,"m":{"docs":{},"df":0,"p":{"docs":{},"df":0,"(":{"docs":{},"df":0,"n":{"docs":{},"df":0,"o":{"docs":{},"df":0,"w":{"docs":{"https://zzyhao0w0.github.io/optimistic-lock/":{"tf":1.0}},"df":1}}}}}}}}}}}}}}}}},"p":{"docs":{},"df":0,"d":{"docs":{},"df":0,"a":{"docs":{},"df":0,"t":{"docs":{"https://zzyhao0w0.github.io/optimistic-lock/":{"tf":2.0}},"df":1}}}}},"v":{"docs":{},"df":0,"e":{"docs":{},"df":0,"r":{"docs":{},"df":0,"s":{"docs":{},"df":0,"i":{"docs":{},"df":0,"o":{"docs":{},"df":0,"n":{"docs":{"https://zzyhao0w0.github.io/optimistic-lock/":{"tf":2.0}},"df":1,"字":{"docs":{},"df":0,"段":{"docs":{},"df":0,")":{"docs":{},"df":0,"，":{"docs":{},"df":0,"做":{"docs":{},"df":0,"出":{"docs":{},"df":0,"更":{"docs":{},"df":0,"新":{"docs":{},"df":0,"然":{"docs":{},"df":0,"后":{"docs":{},"df":0,"提":{"docs":{},"df":0,"交":{"docs":{},"df":0,"的":{"docs":{},"df":0,"时":{"docs":{},"df":0,"候":{"docs":{},"df":0,"，":{"docs":{},"df":0,"就":{"docs":{},"df":0,"需":{"docs":{},"df":0,"要":{"docs":{},"df":0,"用":{"docs":{},"df":0,"当":{"docs":{},"df":0,"前":{"docs":{},"df":0,"的":{"docs":{},"df":0,"v":{"docs":{},"df":0,"e":{"docs":{},"df":0,"r":{"docs":{},"df":0,"s":{"docs":{},"df":0,"i":{"docs":{},"df":0,"o":{"docs":{},"df":0,"n":{"docs":{},"df":0,"和":{"docs":{},"df":0,"数":{"docs":{},"df":0,"据":{"docs":{},"df":0,"库":{"docs":{},"df":0,"的":{"docs":{},"df":0,"v":{"docs":{},"df":0,"e":{"docs":{},"df":0,"r":{"docs":{},"df":0,"s":{"docs":{"https://zzyhao0w0.github.io/optimistic-lock/":{"tf":1.0}},"df":1}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"作":{"docs":{},"df":0,"为":{"docs":{},"df":0,"数":{"docs":{},"df":0,"据":{"docs":{},"df":0,"版":{"docs":{},"df":0,"本":{"docs":{},"df":0,"的":{"docs":{},"df":0,"记":{"docs":{},"df":0,"录":{"docs":{},"df":0,"，":{"docs":{},"df":0,"每":{"docs":{},"df":0,"当":{"docs":{},"df":0,"一":{"docs":{},"df":0,"个":{"docs":{},"df":0,"数":{"docs":{},"df":0,"据":{"docs":{},"df":0,"发":{"docs":{},"df":0,"生":{"docs":{},"df":0,"改":{"docs":{},"df":0,"变":{"docs":{},"df":0,"的":{"docs":{},"df":0,"时":{"docs":{},"df":0,"候":{"docs":{},"df":0,"，":{"docs":{},"df":0,"都":{"docs":{},"df":0,"会":{"docs":{},"df":0,"让":{"docs":{},"df":0,"v":{"docs":{},"df":0,"e":{"docs":{},"df":0,"r":{"docs":{},"df":0,"s":{"docs":{},"df":0,"i":{"docs":{},"df":0,"o":{"docs":{},"df":0,"n":{"docs":{},"df":0,"+":{"docs":{},"df":0,"1":{"docs":{"https://zzyhao0w0.github.io/optimistic-lock/":{"tf":1.0}},"df":1}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"title":{"root":{"docs":{},"df":0,"d":{"docs":{},"df":0,"e":{"docs":{},"df":0,"v":{"docs":{},"df":0,"e":{"docs":{},"df":0,"l":{"docs":{},"df":0,"o":{"docs":{},"df":0,"p":{"docs":{"https://zzyhao0w0.github.io/web-project/":{"tf":1.0}},"df":1}}}}}}},"l":{"docs":{},"df":0,"o":{"docs":{},"df":0,"c":{"docs":{},"df":0,"k":{"docs":{"https://zzyhao0w0.github.io/optimistic-lock/":{"tf":1.0}},"df":1}}}},"o":{"docs":{},"df":0,"p":{"docs":{},"df":0,"t":{"docs":{},"df":0,"i":{"docs":{},"df":0,"m":{"docs":{},"df":0,"i":{"docs":{},"df":0,"s":{"docs":{},"df":0,"t":{"docs":{"https://zzyhao0w0.github.io/optimistic-lock/":{"tf":1.0}},"df":1}}}}}}}},"s":{"docs":{},"df":0,"c":{"docs":{},"df":0,"r":{"docs":{},"df":0,"a":{"docs":{},"df":0,"t":{"docs":{},"df":0,"c":{"docs":{},"df":0,"h":{"docs":{"https://zzyhao0w0.github.io/web-project/":{"tf":1.0}},"df":1}}}}}},"o":{"docs":{},"df":0,"f":{"docs":{},"df":0,"t":{"docs":{},"df":0,"w":{"docs":{},"df":0,"a":{"docs":{},"df":0,"r":{"docs":{"https://zzyhao0w0.github.io/web-project/":{"tf":1.0}},"df":1}}}}}}}}}},"documentStore":{"save":true,"docs":{"https://zzyhao0w0.github.io/":{"body":"","id":"https://zzyhao0w0.github.io/","title":""},"https://zzyhao0w0.github.io/optimistic-lock/":{"body":"什么是乐观锁？\n\n怎么实现乐观锁？\n我们说乐观锁并不是一种具体实现，而是一种思想，那么怎么样可以实现一个乐观锁呢？\n有两种比较常见的方法:\n使用数据版本控制(version)\n\n这是一种比较常见的实现方法，通过在表中添加一个version字段作为数据版本的记录，每当一个数据发生改变的时候，都会让version+1\n当我们读出数据的时候(必须包括version字段)，做出更新然后提交的时候，就需要用当前的version和数据库的version字段做出比较，如果两个字段对的上就会更新的上，如果不对的话，说明当前数据版本已经过时了，也就是有其他的操作修改过这个数据，更新就失败了\nupdate table set price = price + 1, version = version + 1 where version = ? AND id = ?\n\n使用时间戳(timestamp)\n\n这种方法其实对比数据版本控制来说其实也是一样的原理，如果更新时间和获取到的数据更新时间不一致就不予更新\nupdate table set price = price + 1, updated = unix_timestamp(now()) where updated = ? AND id = ?\n\n优点和缺点\n优点: 在读多写少的并发场景下，可以避免数据库加锁的开销，提高Dao层的响应性能\n缺点： 在写多读少的并发场景下，即在写操作竞争激烈的情况下，会导致CAS多次重试，冲突频率过高，导致开销比悲观锁更高\n在悲观锁和乐观锁的抉择中，我们可以从下面三个因素来考虑:\n\n响应速度： 如果Dao层需要非常高的响应速度，尤其是读多写少的场景下，那我们就可以采用乐观锁方案，降低数据库锁的开销，提供并发量\n冲突频率： 如果冲突频率非常高，那么我们就可以采用悲观锁，保证成功率；毕竟如果冲突频率大，乐观锁会需要多次重试才能成功，代价可能会大大增加\n重试代价： 如果重试代价大，比如说重试过程的代码执行非常耗时，那么此时我就不建议使用乐观锁了，还不如直接上悲观锁来了爽快\n\n","id":"https://zzyhao0w0.github.io/optimistic-lock/","title":"What is an optimistic lock?"},"https://zzyhao0w0.github.io/test-page/":{"body":"Test\n这是一个测试界面\nthis is a test page\n","id":"https://zzyhao0w0.github.io/test-page/","title":"测试页面"},"https://zzyhao0w0.github.io/web-project/":{"body":"从零开始开发软件\n\n从零开始开发一款软件\n\n写在开头\n为什么要写这个东西？\n因为出来工作快一年了，在一家初创公司做后端开发，虽然干的很稳定（小公司嘛，也不敢开人），但是开发写的并不是很如意，有时候很不理解老板为什么要这么做和这么做到底是不是对的，总觉得写的很简单，这是golang的错吗？还是敏捷开发的错？还是我理解错了？总让我感觉这东西其实没这么简单，但是实际写起来其实就是很简单的增删改查，每天干着一样的工作，所以很烦恼。虽然截至目前为止，项目其实差不多接近尾声了，快上线了（实际搞了快一年了...），但是每天都干着重复枯燥的活，我意识到这样子是不行的，项目中有很多是贪图方便的做法，完全没有章法，没有测试，没有接口文档，一切都是那样的野蛮，这样我想给面试官谈谈我的项目的时候都是错误示范，所以我想按照软件开发的流程来一次规范的开发，去探讨一下业内开发的一些准则，或者说标准。\n\n每天更新一篇（也许几天一次，看当天的内容而定）\n\n要开发一个什么样的软件？\n还没想好\n用的技术栈？\n我打算用最近刚学的rust，因为我发现好像golang确实是太简单了，当然，指的是语法简单，很多设计思想在这门语言都无法体现出来，就会写很多的重复代码（没错，说的就是if err != nil { return err }），所以我试着用一门不这么简单的语言作为我的开发语言。\n除开编程语言，还有很多的技术就在它需要被使用的时候再去介绍和认识吧\n页面导航\n","id":"https://zzyhao0w0.github.io/web-project/","title":"Developing software from scratch !!!"}},"docInfo":{"https://zzyhao0w0.github.io/":{"body":0,"title":0},"https://zzyhao0w0.github.io/optimistic-lock/":{"body":28,"title":2},"https://zzyhao0w0.github.io/test-page/":{"body":3,"title":0},"https://zzyhao0w0.github.io/web-project/":{"body":6,"title":3}},"length":4},"lang":"English"};